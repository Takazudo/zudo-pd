---
sidebar_position: 2
---

# プロジェクト現状とプラン

USB-PD駆動モジュラーシンセサイザー電源の**現在の進捗状況と今後の計画**をまとめています。

## 🎯 プロジェクトの目的

**USB-C PD 15V入力で、モジュラーシンセ用の±12V/+5V電源を供給する低ノイズ電源モジュール**

- モジュラーシンセ初心者でも安心して使える保護回路
- 全部品JLCPCB調達可能（安定供給・低コスト）
- リップル\<1mVp-pの低ノイズ設計
- USB-C PDで手軽に使える

## ✅ 完了済み項目

### 1. 回路設計 (100%完了)

**4段階アーキテクチャの完成**:

```
USB-C 15V ──┬─→ +13.5V (DC-DC) ──→ +12V (LDO) ──→ +12V OUT
            │
            ├─→ +7.5V  (DC-DC) ──→ +5V  (LDO) ──→ +5V OUT
            │
            └─→ -15V (反転) ──→ -13.5V (DC-DC) ──→ -12V (LDO) ──→ -12V OUT
```

- ✅ 段階1: USB-PD給電部 (CH224Q)
- ✅ 段階2: DC-DCコンバータ (LM2596S × 3 + ICL7660)
- ✅ 段階3: リニアレギュレータ (LM7812/7805/7912)
- ✅ 段階4: 保護回路 (PTC + ヒューズ + TVS)

### 2. 部品選定 (95%完了)

**確定済み部品**: 大部分の部品でJLCPCB品番確定

- ✅ USB-PDコントローラ: CH224Q (C9900166627)
- ✅ DC-DCコンバータ: LM2596S-ADJ × 3 (C347423)
- ✅ 電圧反転IC: ICL7660M (C356724)
- ✅ リニアレギュレータ: LM7812/7805/7912
- ✅ インダクタ: 100µH 4.5A × 3 (C19268674)
- ✅ TVSダイオード: SMAJ15A, PRTR5V0U2X
- ✅ ヒューズ: 1.5A × 2確定 (C95352)

**未確定部品** (要検索):

- ❌ PTCリセッタブルヒューズ × 3
  - PTC1: 1.1A 16V (1812)
  - PTC2: 0.75A 16V (1206)
  - PTC3: 0.9A 16V (1812)
- ❌ 2A SMDヒューズ × 1 (+12V用)

### 3. ドキュメント作成 (100%完了)

- ✅ 完全な回路図 (全10段階)
- ✅ 詳細BOM (JLCPCB品番付き)
- ✅ 設計思想・アーキテクチャ解説
- ✅ 保護回路の動作説明

### 4. コスト試算 (95%完了)

**確定部品の合計**: 約 $4.74/基板

- 段階1: $0.464
- 段階2: $2.09
- 段階3: $0.40
- 段階4: $1.79 (一部推定価格含む)

## 🔄 現在の状況

### どこまで進んだか?

**回路設計フェーズは完了** → **次は部品確定とPCB設計フェーズ**

現在、以下の状態:
1. ✅ 回路設計完了 - 動作可能な設計が確定
2. ✅ ほとんどの部品選定完了 - JLCPCB品番確定済み
3. ⏳ 残り4部品の検索待ち - PTCヒューズと2Aヒューズ
4. ⏳ PCB設計未着手 - KiCadでの基板設計はこれから
5. ⏳ プロトタイプ未製作 - JLCPCBへの発注はまだ

### なぜ止まっているか?

**次に何をするべきか明確でなかった可能性**

実際は、以下の2つの選択肢がある:

1. **残り4部品を確定してから基板設計** (推奨)
   - メリット: 完璧なBOMで一発発注可能
   - デメリット: PTCの検索に時間がかかる可能性

2. **先に基板設計を始める** (並行作業)
   - メリット: すぐに作業開始できる
   - デメリット: 後でフットプリント修正の可能性

## 📋 次のステップ (優先順位順)

### 🔴 優先度: 高 - すぐにやるべきこと

#### ステップ1: 未確定部品の検索 (所要時間: 1-2時間)

**JLCPCBで以下の部品を検索**:

1. PTCリセッタブルヒューズ × 3種類
   - 検索条件: 1.1A/0.75A/0.9A, 16V, 1812/1206パッケージ
   - 在庫100個以上、Basic Parts優先

2. SMDヒューズ (2A, 250V)
   - 検索条件: 10.1x3.1mmパッケージ
   - 在庫100個以上

**検索方法**:
```
1. JLCPCB Parts Library (https://jlcpcb.com/parts)
2. カテゴリ: Protection Devices → PTC Resettable Fuses
3. フィルター: Hold Current, Voltage Rating, Package
4. Basic Partsを優先的に選択
```

#### ステップ2: BOMの最終確定 (所要時間: 30分)

- 検索した部品番号を `/notes/parts.md` に追記
- 価格を更新して最終コスト算出
- `/doc/docs/inbox/parts-list.md` にも反映

### 🟡 優先度: 中 - BOM確定後にやること

#### ステップ3: PCB設計の準備 (所要時間: 2-3時間)

**KiCadプロジェクトのセットアップ**:

1. KiCadプロジェクト新規作成
2. 回路図エディタで回路入力
3. JLCPCB用フットプリントライブラリ追加
4. 全部品にフットプリント割り当て

**必要なフットプリント**:
- `/footprints/CH224Q.png` - 既にあり
- `/footprints/USB-TYPE-C-009.png` - 既にあり
- その他標準フットプリントはKiCad標準ライブラリ使用

#### ステップ4: PCB基板設計 (所要時間: 1-2日)

**レイアウト方針**:

1. **4層基板構成**:
   - Layer 1 (Top): 信号 + 部品配置
   - Layer 2 (Inner): GND plane
   - Layer 3 (Inner): Power plane (+15V, +12V, etc.)
   - Layer 4 (Bottom): 信号

2. **電源レイアウト**:
   - USB-PD部 → DC-DC部 → LDO部の順に配置
   - 高ノイズ部(DC-DC)と低ノイズ部(LDO)を物理分離
   - 大電流経路を太く短く

3. **放熱設計**:
   - LM2596S (TO-263) → サーマルビア配置
   - LM78xx/79xx (TO-220) → ヒートシンクエリア確保
   - 電解コンデンサの放熱も考慮

4. **JLCPCB設計ルール遵守**:
   - 最小トレース幅: 6mil (0.15mm)
   - 最小クリアランス: 6mil
   - ビア径: 0.3mm (穴径0.2mm)

### 🟢 優先度: 低 - プロトタイプ前の準備

#### ステップ5: 製造ファイル生成 (所要時間: 1時間)

- Gerberファイル生成
- Drillファイル生成
- BOMファイル生成 (JLCPCB形式)
- CPLファイル生成 (部品配置データ)

#### ステップ6: JLCPCB見積もり取得 (所要時間: 30分)

**見積もり内容**:
- PCB製造: 5枚 or 10枚
- SMT組み立て: 両面 or 片面
- 部品調達費用
- 送料

**予想コスト** (10枚の場合):
- PCB製造: ~$30
- SMT組み立て: ~$50-100
- 部品費用: ~$50 (10枚分)
- 送料: ~$20
- **合計: $150-200** (10枚 = 1枚あたり$15-20)

#### ステップ7: プロトタイプ発注 (所要時間: 発注15分 + 製造2週間)

**初回発注の推奨内容**:
- 枚数: 5-10枚
- SMT組み立て: 全部品実装
- 配送: DHL (2-3週間)

## 🤔 設計上の懸念事項・検討事項

### 現在の設計で解決済みの課題

1. ✅ **ノイズ対策**: DC-DC + LDO 2段階設計で\<1mVp-p達成見込み
2. ✅ **初心者対応**: PTC自動復帰で過負荷から自動回復
3. ✅ **コスト**: Basic Parts多用で部品費$5以下
4. ✅ **調達安定性**: 全部品JLCPCB在庫豊富

### まだ検証していない項目 (プロトタイプで確認)

1. ⚠️ **熱設計**: LM2596Sの放熱が十分か?
   - 最大損失: 各1.5V × 1A = 1.5W
   - TO-263パッケージで対応可能だが要実測

2. ⚠️ **リップルノイズ**: 実測で\<1mVp-pを達成できるか?
   - 設計上は問題ないが実測が必要

3. ⚠️ **効率**: 実測で75-80%を達成できるか?
   - LM2596S: 85-90%
   - LDO損失: 10-15%
   - 総合効率計算上は75-80%

4. ⚠️ **EMI/EMC**: DC-DCスイッチングノイズの影響は?
   - 入出力フィルタで対策済みだが要実測

## 📝 設計思想の再確認

### なぜこの設計にしたか?

1. **DC-DC + LDO 2段階方式**
   - 理由: 効率とノイズの両立
   - DC-DCだけ: 効率良いがリップル大
   - LDOだけ: ノイズ小さいが効率悪い (発熱大)
   - **2段階**: 両方の良いとこ取り ✨

2. **USB-C PD 15V入力**
   - 理由: 汎用充電器で使える
   - ACアダプタ不要 → 持ち運び便利
   - PD対応充電器なら何でもOK
   - 電圧も15Vで±12V生成に最適

3. **JLCPCB全部品調達**
   - 理由: 安定供給・低コスト・自動実装
   - Basic Parts多用 → 追加費用なし
   - 豊富な在庫 → 長期調達可能
   - SMT自動実装 → 手はんだ不要

4. **PTC自動復帰保護**
   - 理由: 初心者でも安心
   - モジュール過接続 → LED消灯で気づく
   - 30秒待てば自動復帰 → 修理不要
   - 短絡時はヒューズ → 安全確保

## 🎯 プロジェクトのゴール

### 最終目標

**「初心者が安心して使えるモジュラーシンセ電源をJLCPCBで$20/枚以下で製作」**

### 達成基準

- [ ] リップルノイズ \<1mVp-p (実測)
- [ ] 効率 75-80% (実測)
- [ ] 出力電圧精度 ±1% (実測)
- [ ] 過負荷保護動作確認 (LED消灯 → 自動復帰)
- [ ] 短絡保護動作確認 (ヒューズ溶断)
- [ ] 製造コスト $20/枚以下 (10枚発注時)

### 副次的な目標

- 📖 日本語ドキュメント充実 → 日本のMakerコミュニティに貢献
- 🔧 KiCadプロジェクトオープンソース化
- 📝 製作記事執筆 (Qiita/Zenn)
- 🎓 JLCPCB SMT活用のノウハウ共有

## 💡 今すぐできること

**このドキュメントを読み終わったら、すぐに始められること**:

1. **5分でできる**: JLCPCB Parts Libraryを開いて「PTC Resettable Fuse」で検索してみる
2. **30分でできる**: 1.1A/0.75A/0.9Aの3種類のPTCを見つけて `/notes/parts.md` にメモ
3. **1時間でできる**: KiCadをインストールして新規プロジェクト作成
4. **1日でできる**: 回路図エディタに全回路を入力してみる

**まずは「ステップ1: 未確定部品の検索」から始めましょう!** 🚀
